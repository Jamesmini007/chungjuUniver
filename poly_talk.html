<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no" />
    <title>PolyTalk - LX2AI</title>
    <link rel="stylesheet" href="polytalk.css">
    <script src="polytalk.js" defer></script>
</head>
<body>
    <div class="lx_app_wrap">
        <div class="lx_app_header sticky">
            <!-- Î°úÍ≥†, code, ÌÉÄÏù¥Î®∏ -->
            <div class="brand">
                <h1 class="logo"><a href="poly_talk.html" style="text-decoration: none; display: inline-block;">AI Translator Lecture</a></h1>
            </div>
            
            <div class="menu">
                <div class="room-code-display-inline">
                    <span class="room-code-label">Room Code:</span>
                    <span class="room-code-text" id="roomCodeDisplayHeader">-</span>
                </div>
                <button class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-secondary" type="button" id="subjectSelectBtn">
                    
                    <span class="k-button-text" id="subjectSelectText">Í≥ºÎ™© ÏÑ†ÌÉù</span>
                </button>
                <div class="timer">
                    <span class="k-icon k-font-icon k-i-clock">üïê</span>
                    <div class="num" id="timer">00:00:00</div>
                </div>
            </div>
            <!-- //Î°úÍ≥†, code, ÌÉÄÏù¥Î®∏ -->
        </div>

        <!-- Ïã§ÏãúÍ∞Ñ ÏûêÎßâ ÏÑúÎπÑÏä§ -->
        <div class="lx_app_realtime_caption">
            <div class="app_header">
                <div class="lang">
                    <span class="lx-icon lx-i-country">üåê</span>
                    <select id="speakerLanguageCd" name="speakerLanguageCd" style="display: none;">
                        <option value="ko" data-code="ko" selected>ÌïúÍµ≠Ïñ¥</option>
                        <option value="null" data-code="null">Ï†ÑÏ≤¥</option>
                        <option value="en" data-code="en">ÏòÅÏñ¥</option>
                        <option value="zh" data-code="zh">Ï§ëÍµ≠Ïñ¥</option>
                        <option value="ja" data-code="ja">ÏùºÎ≥∏Ïñ¥</option>
                        <option value="es" data-code="es">Ïä§ÌéòÏù∏Ïñ¥</option>
                    </select>
                <button class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-secondary" type="button" onclick="showLanguagePopup()">
                    <span class="k-button-text">Ïñ∏Ïñ¥ ÏÑ§Ï†ï</span>
                </button>
                    <form id="form-language-update" style="display: none;">
                        <input type="hidden" name="voiceTranslationSeq" value="">
                        <input type="checkbox" name="languageCd" value="LANGUAGE::KOREAN" id="languageCd_0">
                        <input type="checkbox" name="languageCd" value="LANGUAGE::ENGLISH" id="languageCd_1" checked>
                        <input type="checkbox" name="languageCd" value="LANGUAGE::CHINESE" id="languageCd_2">
                        <input type="checkbox" name="languageCd" value="LANGUAGE::JAPANESE" id="languageCd_3">
                    </form>
                </div>
                <button class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary" type="button" id="startBtn" disabled>
                    <span class="k-button-text">Í∞ïÏùò ÏãúÏûë</span>
                </button>
                <button class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary " type="button" id="stopBtn" disabled>
                    <span class="k-button-text">Í∞ïÏùò Ï¢ÖÎ£å</span>
                </button>
            </div>
            <!-- ÏûêÎßâ -->
            <div class="cp_trans" style="min-height: 10px;">
                <div class="cp_cols_container">
                    <div class="cp_cols" id="cp_cols_1">
                        <div class="cp_title_wrapper">
                            <p class="cp_title">Í∞ïÏùò Ïñ∏Ïñ¥</p>
                            <button class="caption-close-btn" id="captionCloseBtn" onclick="toggleRealtimeCaption()" title="Îã´Í∏∞">
                                <span class="caption-close-icon">√ó</span>
                            </button>
                        </div>
                        <div class="cp_cols_content" id="cp_cols_content_1"></div>
                    </div>
                </div>
                <div class="cp_cols_container">
                    <div class="cp_cols" id="cp_cols_en">
                        <div class="cp_title_wrapper">
                            <button class="caption-open-btn" id="captionOpenBtn" onclick="toggleRealtimeCaption()" title="Ïó¥Í∏∞" style="display: none;">
                                <span class="caption-open-icon">‚ñ∂</span>
                            </button>
                            <p class="cp_title" id="cp_title_2">Î≤àÏó≠Ïñ∏Ïñ¥</p>
                        </div>
                        <div class="cp_cols_content" id="translatedContentContainer">
                            <!-- Ïñ∏Ïñ¥Î≥Ñ Íµ¨Î∂Ñ ÏòÅÏó≠Ïù¥ ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- //ÏûêÎßâ -->
        </div>
        <!-- //Ïã§ÏãúÍ∞Ñ ÏûêÎßâ ÏÑúÎπÑÏä§ -->
        
        <!-- Î≤àÏó≠ Í∏∞Î°ù ÏÑπÏÖò -->
        <div class="translation-history-section" id="translationHistorySection" style="display: none;">
            <div class="history-container">
                <div class="history-header">
                    <h2 class="history-title">Î≤àÏó≠ Í∏∞Î°ù</h2>
                    <button class="history-close-btn" onclick="closeHistorySection()">√ó</button>
                </div>
                <div class="subject-filter">
                    <label for="subjectFilter">Í≥ºÎ™© ÏÑ†ÌÉù:</label>
                    <select id="subjectFilter">
                        <option value="all">Ï†ÑÏ≤¥</option>
                    </select>
                </div>
                <div class="history-list" id="historyList">
                    <!-- Î≤àÏó≠ Í∏∞Î°ùÏù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
                </div>
            </div>
        </div>
    </div>

    <!-- Í≥ºÎ™© ÏÑ†ÌÉù Î™®Îã¨ -->
    <div class="modal-overlay" id="subjectModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Í≥ºÎ™© ÏÑ†ÌÉù</h2>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Í≥ºÎ™© ÏÑ†ÌÉù ÌôîÎ©¥ -->
                <div class="modal-step" id="subjectStep">
                    <p class="modal-description">Í∞ïÏùò Ï§ë ÏÇ¨Ïö©Ìï† Í≥ºÎ™©ÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.</p>
                    <div class="subject-list" id="subjectList">
                        <!-- Í≥ºÎ™© Î™©Î°ùÏù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
                    </div>
                </div>
                
                <!-- Ïñ∏Ïñ¥ ÏÑ§Ï†ï ÌôîÎ©¥ -->
                <div class="modal-step" id="languageStep" style="display: none;">
                    <div class="language-popup-header">
                        <div class="language-icon-circle">
                            <span class="language-icon-emoji">üåê</span>
                        </div>
                        <h3 class="language-popup-title">Ïñ∏Ïñ¥ ÏÑ§Ï†ï</h3>
                        <p class="language-popup-subtitle">Choose your preferred languages</p>
                    </div>
                    
                    <div class="language-options">
                        <!-- Input Language Section -->
                        <div class="language-section">
                            <label for="subjectModal_inputLanguageCd" class="language-section-label">Input Language</label>
                            <div class="language-input-wrapper">
                                <select id="subjectModal_inputLanguageCd" name="subjectModal_inputLanguageCd" class="language-popup-select">
                                    <option value="ko" data-code="ko" selected>ÌïúÍµ≠Ïñ¥</option>
                                    <option value="en" data-code="en">ÏòÅÏñ¥</option>
                                    <option value="zh" data-code="zh">Ï§ëÍµ≠Ïñ¥</option>
                                    <option value="ja" data-code="ja">ÏùºÎ≥∏Ïñ¥</option>
                                    <option value="null" data-code="null">Ï†ÑÏ≤¥</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Output Languages Section -->
                        <div class="language-section">
                            <label class="language-section-label">Output Languages</label>
                            <div class="output-languages-grid">
                                <label for="subjectModal_speakerLanguageCd_1" class="language-option-card">
                                    <input type="checkbox" name="subjectModal_speakerLanguageCd" value="LANGUAGE::ENGLISH" id="subjectModal_speakerLanguageCd_1" class="language-checkbox" checked>
                                    <span class="language-option-text">English(ÏòÅÏñ¥)</span>
                                </label>
                                <label for="subjectModal_speakerLanguageCd_2" class="language-option-card">
                                    <input type="checkbox" name="subjectModal_speakerLanguageCd" value="LANGUAGE::CHINESE" id="subjectModal_speakerLanguageCd_2" class="language-checkbox">
                                    <span class="language-option-text">‰∏≠Êñá(Ï§ëÍµ≠Ïñ¥)</span>
                                </label>
                                <label for="subjectModal_speakerLanguageCd_3" class="language-option-card">
                                    <input type="checkbox" name="subjectModal_speakerLanguageCd" value="LANGUAGE::JAPANESE" id="subjectModal_speakerLanguageCd_3" class="language-checkbox">
                                    <span class="language-option-text">Êó•Êú¨Ë™û(ÏùºÎ≥∏Ïñ¥)</span>
                                </label>
                                <label for="subjectModal_speakerLanguageCd_4" class="language-option-card">
                                    <input type="checkbox" name="subjectModal_speakerLanguageCd" value="LANGUAGE::VIETNAMESE" id="subjectModal_speakerLanguageCd_4" class="language-checkbox">
                                    <span class="language-option-text">Ti·∫øng Vi·ªát(Î≤†Ìä∏ÎÇ®Ïñ¥)</span>
                                </label>
                            </div>
                            <p class="language-limit-notice" style="margin-top: 10px; font-size: 12px; color: #666;">ÏµúÎåÄ 3Í∞úÍπåÏßÄ ÏÑ†ÌÉù Í∞ÄÎä•Ìï©ÎãàÎã§.</p>
                        </div>
                    </div>
                    
                    <div class="modal-step-footer">
                        <button class="language-popup-btn language-popup-btn-cancel" onclick="goBackToSubjectStep()">Ïù¥Ï†Ñ</button>
                        <button class="language-popup-btn language-popup-btn-save" onclick="saveSubjectAndLanguageSettings()">Ï†ÄÏû•</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Î≤àÏó≠ Í∏∞Î°ù Ï†ÄÏû• ÏôÑÎ£å ÏïåÎ¶º -->
    <div class="toast" id="toast">
        <div class="toast-content">
            <span id="toastMessage"></span>
        </div>
    </div>

    <!-- Room Code Î™®Îã¨ -->
    <div class="modal-overlay" id="roomCodeModal">
        <div class="modal-content room-code-popup">
            <h2 class="room-code-title">Room Code</h2>
            <div class="room-code-display" id="roomCodeDisplay">
                <!-- ÎûúÎç§ ÏΩîÎìúÍ∞Ä Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§ -->
            </div>
            <p class="room-code-instruction">Share this code with participants</p>
            <button class="room-code-close-btn" onclick="closeRoomCodeModal()">Close</button>
        </div>
    </div>

    <!-- Language Settings Î™®Îã¨ -->
    <div class="modal-overlay" id="languageModal">
        <div class="modal-content language-popup">
            <div class="language-popup-header">
                <div class="language-icon-circle">
                    <span class="language-icon-emoji">üåê</span>
                </div>
                <h3 class="language-popup-title">Ïñ∏Ïñ¥ ÏÑ§Ï†ï</h3>
                <p class="language-popup-subtitle">Choose your preferred languages</p>
            </div>
            
            <div class="language-options">
                <!-- Input Language Section -->
                <div class="language-section">
                    <label for="popup_inputLanguageCd" class="language-section-label">Input Language</label>
                    <div class="language-input-wrapper">
                        <select id="popup_inputLanguageCd" name="popup_inputLanguageCd" class="language-popup-select">
                            <option value="ko" data-code="ko" selected>ÌïúÍµ≠Ïñ¥</option>
                            <option value="en" data-code="en">ÏòÅÏñ¥</option>
                            <option value="zh" data-code="zh">Ï§ëÍµ≠Ïñ¥</option>
                            <option value="ja" data-code="ja">ÏùºÎ≥∏Ïñ¥</option>
                            <option value="null" data-code="null">Ï†ÑÏ≤¥</option>
                        </select>
                    </div>
                </div>
                
                <!-- Output Languages Section -->
                <div class="language-section">
                    <label class="language-section-label">Output Languages</label>
                    <div class="output-languages-grid">
                        <label for="popup_speakerLanguageCd_1" class="language-option-card">
                            <input type="checkbox" name="popup_speakerLanguageCd" value="LANGUAGE::ENGLISH" id="popup_speakerLanguageCd_1" class="language-checkbox" checked>
                            <span class="language-option-text">English(ÏòÅÏñ¥)</span>
                        </label>
                        <label for="popup_speakerLanguageCd_2" class="language-option-card">
                            <input type="checkbox" name="popup_speakerLanguageCd" value="LANGUAGE::CHINESE" id="popup_speakerLanguageCd_2" class="language-checkbox">
                            <span class="language-option-text">‰∏≠Êñá(Ï§ëÍµ≠Ïñ¥)</span>
                        </label>
                        <label for="popup_speakerLanguageCd_3" class="language-option-card">
                            <input type="checkbox" name="popup_speakerLanguageCd" value="LANGUAGE::JAPANESE" id="popup_speakerLanguageCd_3" class="language-checkbox">
                            <span class="language-option-text">Êó•Êú¨Ë™û(ÏùºÎ≥∏Ïñ¥)</span>
                        </label>
                        <label for="popup_speakerLanguageCd_4" class="language-option-card">
                            <input type="checkbox" name="popup_speakerLanguageCd" value="LANGUAGE::VIETNAMESE" id="popup_speakerLanguageCd_4" class="language-checkbox">
                            <span class="language-option-text">Ti·∫øng Vi·ªát(Î≤†Ìä∏ÎÇ®Ïñ¥)</span>
                        </label>
                    </div>
                    <p class="language-limit-notice" style="margin-top: 10px; font-size: 12px; color: #666;">ÏµúÎåÄ 3Í∞úÍπåÏßÄ ÏÑ†ÌÉù Í∞ÄÎä•Ìï©ÎãàÎã§.</p>
                </div>
            </div>
            
            <div class="language-popup-footer">
                <button class="language-popup-btn language-popup-btn-save" onclick="saveLanguageSettings()">Save</button>
                <button class="language-popup-btn language-popup-btn-cancel" onclick="closeLanguageModal()">Cancel</button>
            </div>
        </div>
    </div>
</body>
</html>
